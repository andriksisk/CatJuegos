import{c as re,a as z,f as P}from"../chunks/DLXjhQ5a.js";import{i as ie}from"../chunks/DOUU4QpM.js";import{_ as oe,ah as I,ai as ne,a5 as K,$ as ce,s as a,m as u,g as e,a1 as n,a3 as c,a0 as s,a4 as L,S as g,a2 as le}from"../chunks/Eq-yJnJR.js";import{s as f,e as M}from"../chunks/CjzTXdz-.js";import{i as ue}from"../chunks/BIrEnr8j.js";import{e as ve,i as pe}from"../chunks/ddTjM3CW.js";import{r as E}from"../chunks/CbxJ9po1.js";import{a as me,d as N,b as S,f as ge,p as fe}from"../chunks/CZlZJ2kR.js";import{s as be,a as O}from"../chunks/BAEcwoHj.js";import{s as de}from"../chunks/Db7ajZ5Y.js";import{u as _e}from"../chunks/BgGDGauY.js";const he=()=>{const t=de;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},we={subscribe(t){return he().page.subscribe(t)}};var ye=P('<div class="review svelte-15yhaw8"><strong> </strong> <p> </p> <button>Eliminar</button></div>'),xe=P('<h1 class="titulo svelte-15yhaw8"> </h1> <div class="boxSuperior svelte-15yhaw8"><p class="info svelte-15yhaw8"> </p> <h2 class="reselas svelte-15yhaw8">Reseñas</h2> <!> <h3>Agregar reseña</h3> <div class="boxReseña svelte-15yhaw8"><input class="encabezado svelte-15yhaw8" placeholder="Encabezado"/> <input class="texto svelte-15yhaw8" placeholder="Reseña"/> <input class="rating svelte-15yhaw8" type="number" min="1" max="5"/></div> <button class="BtonEnviar svelte-15yhaw8">Enviar</button> <a class="regresar svelte-15yhaw8" href="/juegos">Regresar</a></div>',1);function Be(t,D){oe(D,!1);const J=()=>O(we,"$page",q),j=()=>O(_e,"$user",q),[q,Q]=be();let l=u(null),d=u([]),v=u(""),p=u(""),b=u(5),r=u();async function A(){a(l,await me(e(r))),a(d,await N(e(r)))}async function T(){if(!j()){alert("Debes iniciar sesión para publicar una reseña.");return}if(!e(v)||!e(p)){alert("Debe llenar todos los campos");return}await fe(e(r),j().idUsuario,e(b),e(v),e(p)),a(d,await N(e(r))),a(v,""),a(p,""),a(b,5)}async function V(m){confirm("¿Seguro que deseas eliminar esta reseña?")&&(await ge(m),await A())}I(()=>J(),()=>{a(r,J().params.id)}),I(()=>e(r),()=>{e(r)&&A()}),ne(),ie();var B=re(),W=K(B);{var X=m=>{var U=xe(),_=K(U),Y=n(_,!0);c(_);var C=s(_,2),h=n(C),Z=n(h,!0);c(h);var F=s(h,4);ve(F,1,()=>e(d),pe,(i,o)=>{var $=ye(),R=n($),ae=n(R,!0);c(R);var H=s(R),k=s(H),se=n(k,!0);c(k);var te=s(k,2);c($),L(()=>{f(ae,(e(o),g(()=>e(o).encabezado))),f(H,` ===> ${e(o),g(()=>e(o).rating)??""}/5 ⭐ `),f(se,(e(o),g(()=>e(o).texto)))}),M("click",te,()=>V(e(o).idReview)),z(i,$)});var w=s(F,4),y=n(w);E(y);var x=s(y,2);E(x);var G=s(x,2);E(G),c(w);var ee=s(w,2);le(2),c(C),L(()=>{f(Y,(e(l),g(()=>e(l).nombre))),f(Z,(e(l),g(()=>e(l).descripcion)))}),S(y,()=>e(v),i=>a(v,i)),S(x,()=>e(p),i=>a(p,i)),S(G,()=>e(b),i=>a(b,i)),M("click",ee,T),z(m,U)};ue(W,m=>{e(l)&&m(X)})}z(t,B),ce(),Q()}export{Be as component};
