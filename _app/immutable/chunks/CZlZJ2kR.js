import{a7 as w,a8 as h,S as y,a9 as E,h as g,q as c,aa as b}from"./Eq-yJnJR.js";function j(e,r,t=r){var o=new WeakSet;w(e,"input",async n=>{var a=n?e.defaultValue:e.value;if(a=f(e)?d(a):a,t(a),c!==null&&o.add(c),await h(),a!==(a=r())){var i=e.selectionStart,u=e.selectionEnd,v=e.value.length;if(e.value=a??"",u!==null){var l=e.value.length;i===u&&u===v&&l>v?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=i,e.selectionEnd=Math.min(u,l))}}}),(g&&e.defaultValue!==e.value||y(r)==null&&e.value)&&(t(f(e)?d(e.value):e.value),c!==null&&o.add(c)),E(()=>{var n=r();if(e===document.activeElement){var a=b??c;if(o.has(a))return}f(e)&&n===d(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function f(e){var r=e.type;return r==="number"||r==="range"}function d(e){return e===""?null:+e}const s="https://17349-production.up.railway.app";async function $(e,r){const t=await fetch(`${s}/usuarios`);if(!t.ok)throw new Error("Error al obtener usuarios");const n=(await t.json()).find(a);function a(i){return i.correo==e&&i.contra==r}if(!n)throw new Error("Correo o contraseña incorrectos");return n}async function k(e,r,t){const o=await fetch(`${s}/usuarios`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e,correo:r,contra:t})});if(!o.ok)throw new Error("Error al registrar usuario");return o.text()}async function S(){const e=await fetch(`${s}/juegos`);if(!e.ok)throw new Error("Error al obtener juegos");return e.json()}async function J(e){const r=await fetch(`${s}/juegos/${e}`);if(!r.ok)throw new Error("Juego no encontrado");return r.json()}async function _(e){const r=await fetch(`${s}/reviews`);if(!r.ok)throw new Error("Error al obtener reviews");return(await r.json()).filter(function(o){return o.idJuego==e})}async function T(e,r,t,o,n){const a=await fetch(`${s}/reviews`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idJuego:e,idUsuario:r,rating:t,encabezado:o,texto:n})});if(!a.ok)throw new Error("Error al publicar reseña");return a.json()}async function O(e,r,t,o){return(await fetch(`${s}/juegos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:e,descripcion:r,desarrollador:t,clasificacion:o})})).text()}async function x(e){await fetch(`${s}/juegos/${e}`,{method:"DELETE"})}async function C(e){if(!(await fetch(`${s}/reviews/${e}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar la reseña")}export{J as a,j as b,O as c,_ as d,x as e,C as f,S as g,$ as l,T as p,k as r};
